<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#4c1d95">
  <title>2026 Bingo</title>
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icon-192.png">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    * { -webkit-tap-highlight-color: transparent; }
    body { 
      overscroll-behavior: none;
      -webkit-user-select: none;
      user-select: none;
    }
    textarea { -webkit-user-select: text; user-select: text; }
    input { -webkit-user-select: text; user-select: text; }
    .cell-text { font-size: clamp(8px, 2.5vw, 12px); }
    @media (min-width: 640px) { .cell-text { font-size: 12px; } }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-800">
  <div id="app"></div>

  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <script type="text/babel">
    const { useState, useEffect } = React;

    function BingoCard() {
      // Load from localStorage or use defaults
      const loadState = (key, defaultValue) => {
        try {
          const saved = localStorage.getItem(key);
          return saved ? JSON.parse(saved) : defaultValue;
        } catch { return defaultValue; }
      };

      const [title, setTitle] = useState(() => loadState('bingo-title', '2026 BINGO'));
      const [playerName, setPlayerName] = useState(() => loadState('bingo-player', 'Dein Name'));
      const [cells, setCells] = useState(() => 
        loadState('bingo-cells', Array(25).fill('').map((_, i) => i === 12 ? 'â­ FREE' : ''))
      );
      const [marked, setMarked] = useState(() => 
        loadState('bingo-marked', Array(25).fill(false).map((_, i) => i === 12))
      );
      const [editMode, setEditMode] = useState(true);

      // Save to localStorage
      useEffect(() => {
        localStorage.setItem('bingo-title', JSON.stringify(title));
        localStorage.setItem('bingo-player', JSON.stringify(playerName));
        localStorage.setItem('bingo-cells', JSON.stringify(cells));
        localStorage.setItem('bingo-marked', JSON.stringify(marked));
      }, [title, playerName, cells, marked]);

      const updateCell = (index, value) => {
        if (index === 12) return;
        const newCells = [...cells];
        newCells[index] = value;
        setCells(newCells);
      };

      const toggleMark = (index) => {
        if (index === 12 || editMode) return;
        const newMarked = [...marked];
        newMarked[index] = !newMarked[index];
        setMarked(newMarked);
      };

      const checkBingo = () => {
        const lines = [
          [0,1,2,3,4], [5,6,7,8,9], [10,11,12,13,14], [15,16,17,18,19], [20,21,22,23,24],
          [0,5,10,15,20], [1,6,11,16,21], [2,7,12,17,22], [3,8,13,18,23], [4,9,14,19,24],
          [0,6,12,18,24], [4,8,12,16,20]
        ];
        return lines.some(line => line.every(i => marked[i]));
      };

      const resetMarks = () => {
        setMarked(Array(25).fill(false).map((_, i) => i === 12));
      };

      const resetAll = () => {
        if (confirm('Alles zurÃ¼cksetzen? Alle Hot Takes werden gelÃ¶scht!')) {
          setTitle('2026 BINGO');
          setPlayerName('Dein Name');
          setCells(Array(25).fill('').map((_, i) => i === 12 ? 'â­ FREE' : ''));
          setMarked(Array(25).fill(false).map((_, i) => i === 12));
        }
      };

      const hasBingo = checkBingo();

      return (
        <div className="min-h-screen p-3 pb-6 flex flex-col items-center">
          <div className="w-full max-w-lg">
            
            {/* Header */}
            <div className="text-center mb-3">
              {editMode ? (
                <input
                  type="text"
                  value={title}
                  onChange={(e) => setTitle(e.target.value)}
                  className="text-3xl sm:text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-300 via-pink-300 to-cyan-300 text-center bg-transparent border-none outline-none w-full"
                />
              ) : (
                <h1 className="text-3xl sm:text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-300 via-pink-300 to-cyan-300">
                  {title}
                </h1>
              )}
              
              <div className="mt-1 flex items-center justify-center gap-2">
                <span className="text-white/70 text-sm">Spieler:</span>
                {editMode ? (
                  <input
                    type="text"
                    value={playerName}
                    onChange={(e) => setPlayerName(e.target.value)}
                    className="text-base font-semibold text-cyan-300 bg-transparent border-b border-cyan-300/50 outline-none text-center px-2 w-32"
                  />
                ) : (
                  <span className="text-base font-semibold text-cyan-300">{playerName}</span>
                )}
              </div>
            </div>

            {/* Mode Toggle */}
            <div className="flex justify-center gap-2 mb-3">
              <button
                onClick={() => setEditMode(true)}
                className={`px-4 py-2 rounded-full text-sm font-semibold transition-all ${
                  editMode 
                    ? 'bg-cyan-500 text-white shadow-lg shadow-cyan-500/30' 
                    : 'bg-white/10 text-white/70 hover:bg-white/20'
                }`}
              >
                âœï¸ Bearbeiten
              </button>
              <button
                onClick={() => setEditMode(false)}
                className={`px-4 py-2 rounded-full text-sm font-semibold transition-all ${
                  !editMode 
                    ? 'bg-green-500 text-white shadow-lg shadow-green-500/30' 
                    : 'bg-white/10 text-white/70 hover:bg-white/20'
                }`}
              >
                ğŸ® Spielen
              </button>
            </div>

            {/* Bingo Alert */}
            {hasBingo && (
              <div className="mb-3 p-3 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-xl text-center animate-pulse">
                <span className="text-2xl font-black text-white">ğŸ‰ BINGO! ğŸ‰</span>
              </div>
            )}

            {/* Bingo Grid */}
            <div className="bg-white/10 backdrop-blur-sm rounded-2xl p-2 sm:p-3 shadow-2xl border border-white/20">
              {/* BINGO Letters */}
              <div className="grid grid-cols-5 gap-1 sm:gap-2 mb-1 sm:mb-2">
                {['B', 'I', 'N', 'G', 'O'].map((letter) => (
                  <div
                    key={letter}
                    className="h-8 sm:h-10 flex items-center justify-center text-xl sm:text-2xl font-black text-yellow-300"
                  >
                    {letter}
                  </div>
                ))}
              </div>

              {/* Grid */}
              <div className="grid grid-cols-5 gap-1 sm:gap-2">
                {cells.map((cell, index) => (
                  <div
                    key={index}
                    onClick={() => toggleMark(index)}
                    className={`
                      aspect-square rounded-lg sm:rounded-xl flex items-center justify-center p-0.5 sm:p-1
                      transition-all duration-200
                      ${!editMode && index !== 12 ? 'cursor-pointer active:scale-95' : ''}
                      ${marked[index] && index !== 12
                        ? 'bg-gradient-to-br from-green-400 to-emerald-600 shadow-lg shadow-green-500/30' 
                        : index === 12 
                          ? 'bg-gradient-to-br from-yellow-400 to-orange-500'
                          : 'bg-white/90'
                      }
                    `}
                  >
                    {index === 12 ? (
                      <div className="text-center">
                        <span className="text-lg sm:text-2xl">â­</span>
                        <p className="text-[8px] sm:text-xs font-bold text-white">FREE</p>
                      </div>
                    ) : editMode ? (
                      <textarea
                        value={cell}
                        onChange={(e) => updateCell(index, e.target.value)}
                        placeholder="..."
                        className="w-full h-full text-center cell-text font-medium resize-none bg-transparent border-none outline-none text-gray-700 placeholder-gray-400 leading-tight"
                      />
                    ) : (
                      <span className={`text-center cell-text font-medium leading-tight ${marked[index] ? 'text-white' : 'text-gray-700'}`}>
                        {cell}
                      </span>
                    )}
                  </div>
                ))}
              </div>
            </div>

            {/* Controls */}
            <div className="mt-4 flex justify-center gap-2">
              <button
                onClick={resetMarks}
                className="px-4 py-2 bg-white/10 hover:bg-white/20 text-white/80 rounded-full text-sm transition-all"
              >
                ğŸ”„ Markierungen zurÃ¼cksetzen
              </button>
              <button
                onClick={resetAll}
                className="px-4 py-2 bg-red-500/20 hover:bg-red-500/30 text-red-300 rounded-full text-sm transition-all"
              >
                ğŸ—‘ï¸ Alles lÃ¶schen
              </button>
            </div>

            {/* Instructions */}
            <div className="mt-4 text-center text-white/50 text-xs space-y-0.5">
              {editMode ? (
                <p>âœï¸ Trage deine Hot Takes in die Felder ein</p>
              ) : (
                <p>ğŸ‘† Tippe auf ein Feld um es zu markieren</p>
              )}
              <p>ğŸ¯ 5 in einer Reihe = BINGO!</p>
            </div>

          </div>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('app')).render(<BingoCard />);
  </script>
</body>
</html>
